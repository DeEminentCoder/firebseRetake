<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Welcome to FIREBASE</h1>
    <input type="text" placeholder="user number" id="phonenum">
    <button id="signin">Sign in with google</button>
    <button id="signin2">Sign in with Phone No</button>
    <div id="disp"></div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
      import {
        GoogleAuthProvider,
        getAuth,
        signInWithPopup,RecaptchaVerifier,signInWithPhoneNumber
      } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCOx0NqOn660xrGfoc3xbpUxV5jRu1IPc8",
        authDomain: "first-f4b51.firebaseapp.com",
        projectId: "first-f4b51",
        storageBucket: "first-f4b51.appspot.com",
        messagingSenderId: "121620154887",
        appId: "1:121620154887:web:907f6fc0ef8db352d9b8a2",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const provider = new GoogleAuthProvider();
      const auth = getAuth();

      document.getElementById("signin").addEventListener("click", () => {
        signInWithPopup(auth, provider).then((response) => {
          console.log(response);
          disp.innerHTML = `
          <h1>
            Welcome, ${response.user.displayName}
            </h1>
          <h1>
            Welcome, ${response.user.email}
            </h1>
            <img src='${response.user.photoURL}'/>
            `
            window.location.href = "Dashboard.html"
        })
        .catch((error)=> {
          console.log(error);
        })
        
      });





      
//      // PHONE AUTH
// const phoneNumber = getPhoneNumberFromUserInput();
// const appVerifier = window.recaptchaVerifier;
// const code = getCodeFromUserInput();
// const recaptchaResponse = grecaptcha.getResponse(recaptchaWidgetId);


// document.getElementById("signin2").addEventListener("click", () => {
//   auth.languageCode = 'it';
//   window.recaptchaVerifier = new RecaptchaVerifier(auth, 'recaptcha-container', {});
//   const auth = getAuth();
// signInWithPhoneNumber(auth, phoneNumber, appVerifier)
//     .then((confirmationResult) => {
//       window.confirmationResult = confirmationResult;
//       // ...
//     }).catch((error) => {
//     });
//     grecaptcha.reset(window.recaptchaWidgetId);

// window.recaptchaVerifier.render().then(function(widgetId) {
//   grecaptcha.reset(widgetId);
// });
// confirmationResult.confirm(code).then((result) => {
//   // User signed in successfully.
//   const user = result.user;
//   // ...
// }).catch((error) => {
//   // User couldn't sign in (bad verification code?)
//   // ...
// });
// });

    </script>
  </body>
</html>
